# ğŸ¯ äººè‡‰æª¢æ¸¬å‹•ç•«ç³»çµ±è©³ç´°èªªæ˜

## ğŸ“‹ ç³»çµ±æ¦‚è¿°

æœ¬äººè‡‰æª¢æ¸¬å‹•ç•«ç³»çµ±æ¡ç”¨å››éšæ®µæ¼¸é€²å¼å‹•ç•«ï¼Œåœ¨æª¢æ¸¬åˆ°äººè‡‰æ™‚é€æ­¥é¡¯ç¤ºç„æº–æ¡†æ•ˆæœã€‚ç³»çµ±çµåˆç©©å®šçš„äººè‡‰æª¢æ¸¬æ¼”ç®—æ³•èˆ‡å¯è‡ªè¨‚çš„å‹•ç•«åƒæ•¸ï¼Œæä¾›æµæš¢ä¸”å°ˆæ¥­çš„è¦–è¦ºæ•ˆæœã€‚

## ğŸ¨ å‹•ç•«å››éšæ®µè©³ç´°èªªæ˜

### éšæ®µ1ï¼šå¤–æ¡†è§’è½ç·šæ¢å‡ºç¾ (40å¹…ç•«é¢)
**è¦–è¦ºæ•ˆæœï¼š**
- åœ¨äººè‡‰ä½ç½®å‡ºç¾å››å€‹è§’è½çš„Lå‹ç·šæ¢
- ç·šæ¢å¾ç„¡åˆ°æœ‰æ¼¸é€²å‡ºç¾
- å½¢æˆä¸€å€‹ç„æº–æ¡†çš„åŸºæœ¬è¼ªå»“

**æŠ€è¡“å¯¦ç¾ï¼š**
```python
# å¤–æ¡†å°ºå¯¸é€æ¼¸å¢é•·
self.outside_w += (self.target_w - self.outside_w) * outside_smooth
self.outside_h += (self.target_h - self.outside_h) * outside_smooth

# ç¹ªè£½å››å€‹è§’è½çš„Lå‹ç·šæ¢
cv2.line(frame, è§’è½èµ·é», è§’è½çµ‚é», color, line_thickness)
```

**å¯èª¿åƒæ•¸ï¼š**
- `state1_duration`: æŒçºŒæ™‚é–“ (é è¨­40å¹…ç•«é¢)
- `outside_smooth`: å¤–æ¡†å¢é•·å¹³æ»‘åº¦ (é è¨­0.12)
- `corner_length_ratio`: è§’è½ç·šæ¢é•·åº¦æ¯”ä¾‹ (é è¨­0.07)
- `line_thickness`: ç·šæ¢ç²—ç´° (é è¨­1)

### éšæ®µ2ï¼šå…§æ¡†åŠé€æ˜å€åŸŸå‡ºç¾ (40å¹…ç•«é¢)
**è¦–è¦ºæ•ˆæœï¼š**
- åœ¨è§’è½ç·šæ¢å…§å´å‡ºç¾åŠé€æ˜å¡«å……å€åŸŸ
- ä¿æŒéšæ®µ1çš„è§’è½ç·šæ¢æ•ˆæœ
- å¢å¼·ç„æº–æ¡†çš„ç«‹é«”æ„Ÿ

**æŠ€è¡“å¯¦ç¾ï¼š**
```python
# å…§æ¡†å°ºå¯¸é€æ¼¸å¢é•·
self.w += (self.target_w - self.w) * inner_smooth
self.h += (self.target_h - self.h) * inner_smooth

# å»ºç«‹åŠé€æ˜è¦†è“‹å±¤
overlay = frame.copy()
cv2.rectangle(overlay, å…§æ¡†ç¯„åœ, color, -1)
cv2.addWeighted(overlay, inner_alpha, frame, 1 - inner_alpha, 0, frame)
```

**å¯èª¿åƒæ•¸ï¼š**
- `state2_duration`: æŒçºŒæ™‚é–“ (é è¨­40å¹…ç•«é¢)
- `inner_smooth`: å…§æ¡†å¢é•·å¹³æ»‘åº¦ (é è¨­0.1)
- `inner_alpha`: å…§æ¡†é€æ˜åº¦ (é è¨­50, ç¯„åœ0-255)
- `inner_size_ratio`: å…§æ¡†ç›¸å°æ–¼å¤–æ¡†çš„å°ºå¯¸æ¯”ä¾‹ (é è¨­0.9)

### éšæ®µ3ï¼šåå­—æº–æ˜Ÿé–‹å§‹å»¶ä¼¸ (20å¹…ç•«é¢)
**è¦–è¦ºæ•ˆæœï¼š**
- å¾ä¸­å¿ƒé»é–‹å§‹å»¶ä¼¸åå­—æº–æ˜Ÿç·šæ¢
- ä¿æŒå‰å…©éšæ®µçš„æ‰€æœ‰è¦–è¦ºæ•ˆæœ
- åå­—ç·šå¾çŸ­é€æ¼¸è®Šé•·

**æŠ€è¡“å¯¦ç¾ï¼š**
```python
# åå­—ç·šèµ·å§‹éƒ¨åˆ†é€æ¼¸å»¶ä¼¸
self.start_line += (1 - self.start_line) * cross_start_smooth

# ç¹ªè£½å››å€‹æ–¹å‘çš„åå­—ç·š
cv2.line(frame, ä¸­å¿ƒé», start_lineçµ‚é», color, line_thickness)
```

**å¯èª¿åƒæ•¸ï¼š**
- `state3_duration`: æŒçºŒæ™‚é–“ (é è¨­20å¹…ç•«é¢)
- `cross_start_smooth`: åå­—ç·šèµ·å§‹å»¶ä¼¸å¹³æ»‘åº¦ (é è¨­0.08)
- `cross_length_ratio_h`: åå­—ç·šå‚ç›´é•·åº¦æ¯”ä¾‹ (é è¨­0.59)
- `cross_length_ratio_w`: åå­—ç·šæ°´å¹³é•·åº¦æ¯”ä¾‹ (é è¨­0.55)

### éšæ®µ4ï¼šåå­—æº–æ˜Ÿå®Œå…¨å»¶ä¼¸ (30å¹…ç•«é¢)
**è¦–è¦ºæ•ˆæœï¼š**
- åå­—æº–æ˜Ÿç·šæ¢å®Œå…¨å»¶ä¼¸åˆ°é‚Šç·£
- å½¢æˆå®Œæ•´çš„ç„æº–é¡æ•ˆæœ
- æ‰€æœ‰å‹•ç•«å…ƒç´ éƒ½é”åˆ°æœ€çµ‚ç‹€æ…‹

**æŠ€è¡“å¯¦ç¾ï¼š**
```python
# åå­—ç·šçµ‚ç«¯éƒ¨åˆ†å»¶ä¼¸å®Œæˆ
self.end_line += (1 - self.end_line) * cross_end_smooth

# ç¹ªè£½å®Œæ•´çš„åå­—æº–æ˜Ÿ
cv2.line(frame, start_lineçµ‚é», end_lineçµ‚é», color, line_thickness)
```

**å¯èª¿åƒæ•¸ï¼š**
- `state4_duration`: æŒçºŒæ™‚é–“ (é è¨­30å¹…ç•«é¢)
- `cross_end_smooth`: åå­—ç·šçµ‚ç«¯å»¶ä¼¸å¹³æ»‘åº¦ (é è¨­0.12)

## âš™ï¸ æ ¸å¿ƒé‹è¡Œé‚è¼¯

### ğŸ”„ å‹•ç•«ç‹€æ…‹ç®¡ç†
```python
# ç´¯ç©å¼ç‹€æ…‹ç³»çµ± - ä¿æŒå…ˆå‰éšæ®µæ•ˆæœ
if self.state >= 1:  # éšæ®µ1åŠä»¥å¾Œ
    # ç¹ªè£½è§’è½ç·šæ¢
if self.state >= 2:  # éšæ®µ2åŠä»¥å¾Œ  
    # ç¹ªè£½è§’è½ç·šæ¢ + å…§æ¡†
if self.state >= 3:  # éšæ®µ3åŠä»¥å¾Œ
    # ç¹ªè£½è§’è½ç·šæ¢ + å…§æ¡† + åå­—ç·šèµ·å§‹
if self.state >= 4:  # éšæ®µ4
    # ç¹ªè£½æ‰€æœ‰æ•ˆæœ + å®Œæ•´åå­—ç·š
```

### ğŸ“ å°ºå¯¸è¨ˆç®—é‚è¼¯
```python
# æª¢æ¸¬æ¡†è‡ªå‹•æ”¾å¤§1.5å€
self.target_w = detected_width * 1.5
self.target_h = detected_height * 1.5

# å¹³æ»‘è¿½è¹¤ç›®æ¨™ä½ç½®
self.x += (self.target_x - self.x) * position_smooth
self.y += (self.target_y - self.y) * position_smooth
```

### ğŸ¯ äººè‡‰æª¢æ¸¬ç©©å®šåŒ–
```python
# åŠ æ¬Šå¹³å‡æ¿¾æ³¢ (æœ€è¿‘5å¹…ç•«é¢)
weights = [0.4, 0.3, 0.2, 0.1]  # æ–°å¹…ç•«é¢æ¬Šé‡æ›´é«˜
smoothed_position = weighted_average(face_history, weights)

# æ™ºæ…§å®¹éŒ¯æ©Ÿåˆ¶
if face_lost_count <= max_lost_frames:
    return stable_face  # ä½¿ç”¨æ­·å²ä½ç½®
```

## ğŸ› ï¸ è¨­å®šæª”åƒæ•¸è©³è§£

### [BASIC] åŸºæœ¬å‹•ç•«åƒæ•¸
| åƒæ•¸ | èªªæ˜ | é è¨­å€¼ | ç¯„åœ |
|------|------|--------|------|
| `position_smooth` | ä½ç½®è¿½è¹¤å¹³æ»‘åº¦ | 0.08 | 0.01-1.0 |
| `state1_duration` | éšæ®µ1æŒçºŒå¹…ç•«é¢æ•¸ | 40 | 10-100 |
| `state2_duration` | éšæ®µ2æŒçºŒå¹…ç•«é¢æ•¸ | 40 | 10-100 |
| `state3_duration` | éšæ®µ3æŒçºŒå¹…ç•«é¢æ•¸ | 20 | 5-50 |
| `state4_duration` | éšæ®µ4æŒçºŒå¹…ç•«é¢æ•¸ | 30 | 10-80 |

### [VISUAL] è¦–è¦ºæ•ˆæœåƒæ•¸
| åƒæ•¸ | èªªæ˜ | é è¨­å€¼ | ç¯„åœ |
|------|------|--------|------|
| `color_r` | ç´…è‰²åˆ†é‡ | 255 | 0-255 |
| `color_g` | ç¶ è‰²åˆ†é‡ | 255 | 0-255 |
| `color_b` | è—è‰²åˆ†é‡ | 255 | 0-255 |
| `flicker_probability` | é–ƒçˆæ©Ÿç‡ | 0.2 | 0.0-1.0 |

### [STATE1-4] å„éšæ®µå°ˆå±¬åƒæ•¸
| åƒæ•¸ | èªªæ˜ | é è¨­å€¼ | ç¯„åœ |
|------|------|--------|------|
| `outside_smooth` | å¤–æ¡†è®ŠåŒ–å¹³æ»‘åº¦ | 0.12 | 0.01-1.0 |
| `inner_smooth` | å…§æ¡†è®ŠåŒ–å¹³æ»‘åº¦ | 0.1 | 0.01-1.0 |
| `cross_start_smooth` | åå­—ç·šèµ·å§‹å¹³æ»‘åº¦ | 0.08 | 0.01-0.5 |
| `cross_end_smooth` | åå­—ç·šçµæŸå¹³æ»‘åº¦ | 0.12 | 0.01-0.5 |
| `corner_length_ratio` | è§’è½ç·šæ¢é•·åº¦æ¯”ä¾‹ | 0.07 | 0.01-0.5 |
| `line_thickness` | ç·šæ¢ç²—ç´° | 1 | 1-10 |
| `inner_alpha` | å…§æ¡†é€æ˜åº¦ | 50 | 0-255 |
| `inner_size_ratio` | å…§æ¡†å°ºå¯¸æ¯”ä¾‹ | 0.9 | 0.1-1.0 |

## ğŸ”§ äººè‡‰æª¢æ¸¬æ¼”ç®—æ³•

### æª¢æ¸¬å„ªåŒ–ç­–ç•¥
1. **é«˜æ–¯æ¨¡ç³Šé è™•ç†** - æ¸›å°‘é›œè¨Šå¹²æ“¾
2. **åš´æ ¼æª¢æ¸¬åƒæ•¸** - scaleFactor=1.05, minNeighbors=6
3. **å°ºå¯¸é™åˆ¶** - minSize=(30,30), maxSize=(300,300)
4. **å–®è‡‰æ¨¡å¼** - åªä¿ç•™æœ€å¤§é¢ç©çš„äººè‡‰

### å¹³æ»‘åŒ–è™•ç†
1. **æ­·å²è¨˜éŒ„** - ä¿å­˜æœ€è¿‘5å¹…ç•«é¢çš„æª¢æ¸¬çµæœ
2. **åŠ æ¬Šå¹³å‡** - æ–°å¹…ç•«é¢æ¬Šé‡è¼ƒé«˜
3. **æ™ºæ…§é æ¸¬** - çŸ­æ™‚é–“ä¸Ÿå¤±ä½¿ç”¨æ­·å²ä½ç½®
4. **å®¹éŒ¯æ©Ÿåˆ¶** - å…è¨±æœ€å¤š10å¹…ç•«é¢çš„æª¢æ¸¬å¤±æ•—

### ç‹€æ…‹ç›£æ§
- **"Face: Stable (1)"** - æª¢æ¸¬ç©©å®š
- **"Face: Detected (1)"** - å‰›æª¢æ¸¬åˆ°
- **"Face: Lost (3/10)"** - æš«æ™‚ä¸Ÿå¤±ï¼Œå®¹éŒ¯ä¸­
- **"Face: Searching..."** - æœå°‹äººè‡‰ä¸­

## ğŸ“ˆ æ•ˆèƒ½å„ªåŒ–

### è™•ç†ç­–ç•¥
- **é™è§£æåº¦æª¢æ¸¬** - 640x360è™•ç†ï¼Œæå‡é€Ÿåº¦
- **é©ä¸­æª¢æ¸¬é »ç‡** - 30FPSå¹³è¡¡æ•ˆèƒ½èˆ‡ç©©å®šæ€§
- **éé˜»å¡ä½‡åˆ—** - æ™ºæ…§å¹…ç•«é¢ç®¡ç†
- **ç´”OpenCVæ¸²æŸ“** - ç¡¬é«”åŠ é€Ÿåœ–å½¢è™•ç†

### è¨˜æ†¶é«”ç®¡ç†
- **æ™ºæ…§åƒåœ¾å›æ”¶** - å®šæœŸæ¸…ç†æš«å­˜è®Šæ•¸
- **æ­·å²è¨˜éŒ„é™åˆ¶** - åªä¿ç•™å¿…è¦çš„5å¹…ç•«é¢
- **å–®åŸ·è¡Œç·’æª¢æ¸¬** - æ¸›å°‘åŸ·è¡Œç·’åˆ‡æ›é–‹éŠ·

## ğŸ® æ“ä½œèªªæ˜

### éµç›¤æ§åˆ¶
- **L** - æ–°å¢å·¦å´è¨“ç·´è³‡æ–™
- **R** - æ–°å¢å³å´è¨“ç·´è³‡æ–™  
- **Q** - é€€å‡ºç¨‹å¼

### å³æ™‚èª¿æ•´
1. ç·¨è¼¯ `anim_config.txt`
2. å„²å­˜æª”æ¡ˆ
3. ä¸‹æ¬¡æª¢æ¸¬åˆ°äººè‡‰æ™‚è‡ªå‹•æ‡‰ç”¨æ–°è¨­å®š

## ğŸ’¡ è‡ªè¨‚å»ºè­°

### æå‡ç©©å®šæ€§
- é™ä½ `position_smooth` (0.05-0.08)
- å¢åŠ å„éšæ®µ `duration` 
- é™ä½å„ç¨® `smooth` åƒæ•¸

### æå‡åæ‡‰é€Ÿåº¦  
- æé«˜ `position_smooth` (0.15-0.25)
- æ¸›å°‘å„éšæ®µ `duration`
- æé«˜å„ç¨® `smooth` åƒæ•¸

### è¦–è¦ºæ•ˆæœèª¿æ•´
- ä¿®æ”¹ `color_r/g/b` æ”¹è®Šé¡è‰²
- èª¿æ•´ `line_thickness` æ”¹è®Šç·šæ¢ç²—ç´°
- ä¿®æ”¹ `inner_alpha` èª¿æ•´é€æ˜åº¦
- èª¿æ•´ `corner_length_ratio` æ”¹è®Šè§’è½é•·åº¦

---

**é€™å€‹å‹•ç•«ç³»çµ±æä¾›äº†å°ˆæ¥­ç´šçš„äººè‡‰æª¢æ¸¬è¦–è¦ºæ•ˆæœï¼Œæ‰€æœ‰åƒæ•¸éƒ½å¯ä»¥å³æ™‚èª¿æ•´ï¼** ğŸ¯âœ¨ 